# 機能仕様ドキュメント

## 概要

このディレクトリには、OshiTalkの各機能の技術的な実装方針（Functional Specification）が含まれています。

機能仕様は、**業務仕様（/docs/business/）を実現するための技術的な設計**を定義します。

## ドキュメント目的

- **開発者** が実装すべき「How（どう実装するか）」を明確化
- **技術的な設計**（API設計、データ構造、処理ロジック）を定義
- **実装・修正ごとに更新**される

## 機能仕様一覧

| 機能名 | ドキュメント | 対応する業務仕様 |
|--------|------------|----------------|
| オークション機能 | [auction.md](./auction.md) | [オークション業務](../business/auction.md) |
| Talk機能 | [talk.md](./talk.md) | [ビデオ通話業務](../business/video-call.md) |
| 決済機能 | [payment.md](./payment.md) | [決済業務](../business/payment.md) |
| 認証機能 | [authentication.md](./authentication.md) | [ユーザー管理業務](../business/user-management.md) |
| インフルエンサー管理機能 | [influencer.md](./influencer.md) | [ユーザー管理業務](../business/user-management.md) |
| フォロー機能 | [follow.md](./follow.md) | [ユーザー管理業務](../business/user-management.md) |
| ランキング機能 | [ranking.md](./ranking.md) | [ユーザー管理業務](../business/user-management.md) |
| 通話ステータス管理 | [call-status-management.md](./call-status-management.md) | [ビデオ通話業務](../business/video-call.md) |

## ドキュメント構成

各機能仕様ドキュメントは以下の構成で記載されています：

1. **概要** - 機能の目的と概要
2. **対応する業務仕様** - どの業務仕様を実現するか
3. **機能詳細** - 具体的な機能とフロー
4. **データ構造** - DBテーブル定義、スキーマ
5. **API設計** - エンドポイント、リクエスト、レスポンス
6. **状態遷移** - 状態遷移図
7. **エラーハンドリング** - エラー処理とメッセージ
8. **セキュリティ** - セキュリティ対策とRLS設定
9. **パフォーマンス最適化** - 最適化手法
10. **関連ファイル** - 実装ファイルへのリンク
11. **変更履歴** - 変更内容の記録

## 業務仕様との関係

### 業務仕様（/docs/business/）
- **目的**: 「何を実現したいか（What）」を記述
- **対象読者**: PO/PM/ビジネス/QA
- **変更頻度**: 低い（ビジネス要件の変更時のみ更新）
- **原本として厳格に管理**

### 機能仕様（/docs/functional/）
- **目的**: 「どう実現するか（How）」を記述
- **対象読者**: 開発者
- **変更頻度**: 高い（実装・修正ごとに更新）
- **業務仕様から導出される**

## 開発フローとの関係

```
業務仕様（What）
    ↓ 導出
テスト仕様（検証基準）
    ↓ 導出
機能仕様（How）
    ↓ 実装
コード
```

詳細は [/docs/ai_workflow/AI_TDD_PROCESS_v3.md](../ai_workflow/AI_TDD_PROCESS_v3.md) を参照してください。

## 使い方

### 新機能開発時
1. 対応する業務仕様（/docs/business/）を確認
2. 機能仕様ドキュメントを確認
3. データ構造とAPIを理解
4. 実装ファイルを参照
5. テストを実行

### バグ修正時
1. エラーハンドリングセクションを確認
2. 関連するデータ構造を確認
3. セキュリティ影響を検討
4. 機能仕様を更新

### 機能変更時
1. 業務仕様の変更要否を確認
2. 機能仕様を更新
3. 変更履歴に記録

## 関連ドキュメント

- [業務仕様](../business/) - ビジネス要件の原本
- [テスト計画](../test/plans/) - テストケース
- [AI開発プロセス](../ai_workflow/AI_TDD_PROCESS_v3.md) - 開発フロー

---

**最終更新日**: 2025-01-XX

