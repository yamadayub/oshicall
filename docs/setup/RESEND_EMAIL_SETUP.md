# Resend ä»»æ„ã‚¢ãƒ‰ãƒ¬ã‚¹ã¸ã®ãƒ¡ãƒ¼ãƒ«é€ä¿¡è¨­å®šã‚¬ã‚¤ãƒ‰

## ğŸ“‹ å•é¡Œã®æ¦‚è¦

Resendã®ç„¡æ–™ãƒ—ãƒ©ãƒ³ã‚„é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€**æ‰¿èªæ¸ˆã¿ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**ã«ã—ã‹é€ä¿¡ã§ãã¾ã›ã‚“ã€‚æœ¬ç•ªç’°å¢ƒã§ä»»æ„ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ¡ãƒ¼ãƒ«ï¼ˆã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³é€šçŸ¥ã€Talké–‹å§‹é€šçŸ¥ãªã©ï¼‰ã‚’é€ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®è¨­å®šãŒå¿…è¦ã§ã™ã€‚

## ğŸ¯ å¿…è¦ãªæ¡ä»¶

ä»»æ„ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ¡ä»¶ã‚’ã™ã¹ã¦æº€ãŸã™å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

1. âœ… **ãƒ‰ãƒ¡ã‚¤ãƒ³èªè¨¼å®Œäº†**ï¼ˆDNSè¨­å®šï¼‰
2. âœ… **Production APIã‚­ãƒ¼ã‚’ä½¿ç”¨**
3. âš ï¸ **Resend Dashboardã§ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒ "Verified" çŠ¶æ…‹**
4. âš ï¸ **é©åˆ‡ãªãƒ—ãƒ©ãƒ³ï¼ˆç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã‚‚å¯èƒ½ã ãŒåˆ¶é™ã‚ã‚Šï¼‰**

## ğŸ“Š Resendãƒ—ãƒ©ãƒ³æ¯”è¼ƒ

| ãƒ—ãƒ©ãƒ³ | æœˆé¡ | é€ä¿¡æ•°/æœˆ | é€ä¿¡å…ˆåˆ¶é™ | æ¨å¥¨ç”¨é€” |
|--------|------|-----------|-----------|----------|
| **Free** | $0 | 3,000é€š | ãƒ‰ãƒ¡ã‚¤ãƒ³èªè¨¼å®Œäº†ã§ä»»æ„ã‚¢ãƒ‰ãƒ¬ã‚¹å¯ | é–‹ç™ºãƒ»å°è¦æ¨¡ãƒ†ã‚¹ãƒˆ |
| **Pro** | $20~ | 50,000é€š~ | ä»»æ„ã‚¢ãƒ‰ãƒ¬ã‚¹ | æœ¬ç•ªç’°å¢ƒ |
| **Enterprise** | è¦ç›¸è«‡ | ã‚«ã‚¹ã‚¿ãƒ  | ä»»æ„ã‚¢ãƒ‰ãƒ¬ã‚¹ | å¤§è¦æ¨¡é‹ç”¨ |

**çµè«–:** ãƒ‰ãƒ¡ã‚¤ãƒ³èªè¨¼ãŒå®Œäº†ã—ã¦ã„ã‚Œã°ã€**ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã‚‚ä»»æ„ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã«é€ä¿¡å¯èƒ½**ã§ã™ã€‚ãŸã ã—ã€æœˆ3,000é€šã®åˆ¶é™ãŒã‚ã‚Šã¾ã™ã€‚

## ğŸš€ è¨­å®šæ‰‹é †ï¼ˆã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: Resend Dashboardã§ãƒ‰ãƒ¡ã‚¤ãƒ³èªè¨¼çŠ¶æ…‹ã‚’ç¢ºèª

1. [Resend Dashboard > Domains](https://resend.com/domains) ã«ã‚¢ã‚¯ã‚»ã‚¹

2. `oshi-talk.com` ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¢ºèª

   **æœŸå¾…ã™ã‚‹çŠ¶æ…‹:**
   ```
   Domain: oshi-talk.com
   Status: âœ… Verified
   SPF: âœ… Valid
   DKIM: âœ… Valid
   DMARC: âœ… Valid
   ```

3. ã‚‚ã— "Pending" ã‚„ "Not Verified" ã®å ´åˆã€DNSè¨­å®šã‚’ç¢ºèª

### ã‚¹ãƒ†ãƒƒãƒ—2: DNSè¨­å®šã®ç¢ºèªï¼ˆCloudflareï¼‰

Cloudflare DNSã«ä»¥ä¸‹ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚

#### å¿…è¦ãªDNSãƒ¬ã‚³ãƒ¼ãƒ‰

1. **SPFãƒ¬ã‚³ãƒ¼ãƒ‰**
   ```
   Type: TXT
   Name: @
   Value: v=spf1 include:_spf.google.com include:_spf.resend.com ~all
   ```

2. **DKIMãƒ¬ã‚³ãƒ¼ãƒ‰**
   ```
   Type: TXT
   Name: resend._domainkey
   Value: ï¼ˆResend Dashboardã§æä¾›ã•ã‚Œã‚‹å€¤ï¼‰
   ```

3. **DMARCãƒ¬ã‚³ãƒ¼ãƒ‰**
   ```
   Type: TXT
   Name: _dmarc
   Value: v=DMARC1; p=none
   ```

#### ç¢ºèªæ–¹æ³•

```bash
# SPFãƒ¬ã‚³ãƒ¼ãƒ‰ç¢ºèª
dig TXT oshi-talk.com +short

# DKIMãƒ¬ã‚³ãƒ¼ãƒ‰ç¢ºèª
dig TXT resend._domainkey.oshi-talk.com +short

# DMARCãƒ¬ã‚³ãƒ¼ãƒ‰ç¢ºèª
dig TXT _dmarc.oshi-talk.com +short
```

### ã‚¹ãƒ†ãƒƒãƒ—3: Production APIã‚­ãƒ¼ã®ç¢ºèª

1. [Resend Dashboard > API Keys](https://resend.com/api-keys) ã«ã‚¢ã‚¯ã‚»ã‚¹

2. **Productionç’°å¢ƒç”¨ã®APIã‚­ãƒ¼**ã‚’ç¢ºèª
   - åå‰: Production API Keyï¼ˆã¾ãŸã¯é¡ä¼¼ï¼‰
   - æ¨©é™: Full Access ã¾ãŸã¯ Send emails

3. APIã‚­ãƒ¼ãŒSupabase Edge Functionsã«æ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

   ```bash
   # Supabase secretsã‚’ç¢ºèª
   SUPABASE_ACCESS_TOKEN="your_token" \
     npx supabase secrets list --project-ref atkhwwqunwmpzqkgavtx

   # æœŸå¾…ã™ã‚‹å‡ºåŠ›:
   # RESEND_API_KEY=re_...
   # FROM_EMAIL=OshiTalk <noreply@oshi-talk.com>
   # APP_URL=https://oshi-talk.com
   ```

4. ã‚‚ã—APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã€ã¾ãŸã¯å¤ã„å ´åˆã¯å†è¨­å®š

   ```bash
   SUPABASE_ACCESS_TOKEN="your_token" \
     npx supabase secrets set \
     RESEND_API_KEY=re_your_production_api_key \
     --project-ref atkhwwqunwmpzqkgavtx
   ```

### ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ‰ãƒ¡ã‚¤ãƒ³æ¤œè¨¼ï¼ˆResend Dashboardï¼‰

1. [Resend Dashboard > Domains](https://resend.com/domains) ã§ `oshi-talk.com` ã‚’ã‚¯ãƒªãƒƒã‚¯

2. **"Verify Domain"** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

3. æ¤œè¨¼çµæœã‚’ç¢ºèª
   - âœ… ã™ã¹ã¦ã‚°ãƒªãƒ¼ãƒ³ãƒã‚§ãƒƒã‚¯ã«ãªã‚Œã°OK
   - âŒ èµ¤ã„ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã€DNSè¨­å®šã‚’ä¿®æ­£

### ã‚¹ãƒ†ãƒƒãƒ—5: ãƒ†ã‚¹ãƒˆé€ä¿¡

#### 5.1 Resend DashboardçµŒç”±ã§ãƒ†ã‚¹ãƒˆ

1. [Resend Dashboard > Emails](https://resend.com/emails) ã«ã‚¢ã‚¯ã‚»ã‚¹

2. **"Send Test Email"** ã‚’ã‚¯ãƒªãƒƒã‚¯

3. ä»¥ä¸‹ã®å†…å®¹ã§é€ä¿¡ãƒ†ã‚¹ãƒˆ:
   ```
   From: noreply@oshi-talk.com
   To: your-personal-email@example.comï¼ˆä»»æ„ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰
   Subject: Test Email
   Body: This is a test email from OshiTalk.
   ```

4. é€ä¿¡ãŒæˆåŠŸã—ã€ãƒ¡ãƒ¼ãƒ«ãŒå±Šãã“ã¨ã‚’ç¢ºèª

#### 5.2 Supabase Edge FunctionçµŒç”±ã§ãƒ†ã‚¹ãƒˆ

å®Ÿéš›ã®Edge Functionã‚’å‘¼ã³å‡ºã—ã¦ãƒ†ã‚¹ãƒˆ:

```bash
# Edge Functionã‚’å‘¼ã³å‡ºã—
curl -X POST https://atkhwwqunwmpzqkgavtx.supabase.co/functions/v1/send-notification \
  -H "Authorization: Bearer YOUR_ANON_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "to": "your-test-email@example.com",
    "subject": "OshiTalk Test Notification",
    "html": "<p>This is a test notification from OshiTalk.</p>"
  }'
```

### ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ—ãƒ©ãƒ³ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆå¿…è¦ãªå ´åˆï¼‰

ç„¡æ–™ãƒ—ãƒ©ãƒ³ã®æœˆ3,000é€šã§ã¯ä¸è¶³ã™ã‚‹å ´åˆã€Proãƒ—ãƒ©ãƒ³ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

#### ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹é †

1. [Resend Dashboard > Settings > Billing](https://resend.com/settings/billing) ã«ã‚¢ã‚¯ã‚»ã‚¹

2. **"Upgrade to Pro"** ã‚’ã‚¯ãƒªãƒƒã‚¯

3. ãƒ—ãƒ©ãƒ³ã‚’é¸æŠ
   - **Pro Plan**: $20/æœˆï¼ˆ50,000é€šï¼‰
   - ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ©ãƒ³ãŒå¿…è¦ãªå ´åˆã¯ "Contact Sales"

4. æ”¯æ‰•ã„æƒ…å ±ã‚’å…¥åŠ›ã—ã¦å®Œäº†

#### ãƒ—ãƒ©ãƒ³é¸æŠã®ç›®å®‰

**ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã¨ãƒ¡ãƒ¼ãƒ«é€ä¿¡æ•°ã®è©¦ç®—:**

| ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•° | 1æ—¥ã®é€šçŸ¥æ•°/äºº | æœˆé–“é€ä¿¡æ•° | æ¨å¥¨ãƒ—ãƒ©ãƒ³ |
|-----------|---------------|-----------|-----------|
| ~100äºº | 1é€š | ~3,000é€š | Free |
| ~1,000äºº | 2é€š | ~60,000é€š | Pro (50,000é€š) |
| ~5,000äºº | 2é€š | ~300,000é€š | Pro (250,000é€š) |

**é€šçŸ¥ã®ç¨®é¡:**
- ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³é–‹å§‹é€šçŸ¥
- å…¥æœ­é€šçŸ¥
- è½æœ­é€šçŸ¥
- Talké–‹å§‹é€šçŸ¥
- æ±ºæ¸ˆå®Œäº†é€šçŸ¥
- ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

## ğŸ§ª ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒ "Pending" ã®ã¾ã¾

**åŸå› :** DNSè¨­å®šãŒåæ˜ ã•ã‚Œã¦ã„ãªã„ã€ã¾ãŸã¯èª¤ã£ã¦ã„ã‚‹

**è§£æ±ºç­–:**
1. Cloudflare DNSã§è¨­å®šã‚’å†ç¢ºèª
2. DNSä¼æ’­ã‚’å¾…ã¤ï¼ˆæœ€å¤§48æ™‚é–“ã€é€šå¸¸ã¯1-2æ™‚é–“ï¼‰
3. DNSä¼æ’­ç¢ºèªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨: https://dnschecker.org/

### å•é¡Œ2: "Domain not verified" ã‚¨ãƒ©ãƒ¼

**åŸå› :** ãƒ‰ãƒ¡ã‚¤ãƒ³æ¤œè¨¼ãŒå®Œäº†ã—ã¦ã„ãªã„

**è§£æ±ºç­–:**
1. Resend Dashboardã§ "Verify Domain" ã‚’å†å®Ÿè¡Œ
2. DNSãƒ¬ã‚³ãƒ¼ãƒ‰ãŒæ­£ç¢ºã‹ç¢ºèªï¼ˆç‰¹ã«DKIMå€¤ï¼‰
3. Resendã‚µãƒãƒ¼ãƒˆã«å•ã„åˆã‚ã›

### å•é¡Œ3: ãƒ¡ãƒ¼ãƒ«ãŒå±Šã‹ãªã„ï¼ˆã‚¹ãƒ‘ãƒ æ‰±ã„ï¼‰

**åŸå› :** SPF/DKIM/DMARCè¨­å®šã®ä¸å‚™

**è§£æ±ºç­–:**
1. DNSè¨­å®šã‚’å†ç¢ºèª
2. DMARCãƒãƒªã‚·ãƒ¼ã‚’ `p=quarantine` ã«å¤‰æ›´ï¼ˆã‚ˆã‚Šå³æ ¼ï¼‰
   ```
   v=DMARC1; p=quarantine; rua=mailto:dmarc@oshi-talk.com
   ```
3. ãƒ¡ãƒ¼ãƒ«é€ä¿¡å…ƒã‚’ç¢ºèªï¼ˆå¿…ãš `noreply@oshi-talk.com` ã‚’ä½¿ç”¨ï¼‰

### å•é¡Œ4: APIã‚­ãƒ¼ãŒç„¡åŠ¹

**åŸå› :** APIã‚­ãƒ¼ãŒæœŸé™åˆ‡ã‚Œã€ã¾ãŸã¯å‰Šé™¤ã•ã‚Œã¦ã„ã‚‹

**è§£æ±ºç­–:**
1. Resend Dashboardã§æ–°ã—ã„APIã‚­ãƒ¼ã‚’ç”Ÿæˆ
2. Supabase secretsã‚’æ›´æ–°
3. Edge Functionsã‚’å†ãƒ‡ãƒ—ãƒ­ã‚¤

## ğŸ“ ç¾åœ¨ã®è¨­å®šçŠ¶æ…‹ï¼ˆç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼‰

### Productionç’°å¢ƒï¼ˆoshi-talk.comï¼‰

- [ ] Resendãƒ‰ãƒ¡ã‚¤ãƒ³èªè¨¼: `oshi-talk.com` â†’ Status: Verified
- [ ] Cloudflare DNSè¨­å®š:
  - [ ] SPF ãƒ¬ã‚³ãƒ¼ãƒ‰è¨­å®šæ¸ˆã¿
  - [ ] DKIM ãƒ¬ã‚³ãƒ¼ãƒ‰è¨­å®šæ¸ˆã¿
  - [ ] DMARC ãƒ¬ã‚³ãƒ¼ãƒ‰è¨­å®šæ¸ˆã¿
- [ ] Resend Production APIã‚­ãƒ¼å–å¾—
- [ ] Supabase Edge Functionsç’°å¢ƒå¤‰æ•°è¨­å®š:
  - [ ] `RESEND_API_KEY` è¨­å®šæ¸ˆã¿
  - [ ] `FROM_EMAIL` = `OshiTalk <noreply@oshi-talk.com>`
  - [ ] `APP_URL` = `https://oshi-talk.com`
- [ ] ãƒ†ã‚¹ãƒˆé€ä¿¡æˆåŠŸï¼ˆä»»æ„ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã«é€ä¿¡ã§ãã‚‹ï¼‰
- [ ] Resendãƒ—ãƒ©ãƒ³ç¢ºèªï¼ˆFree or Proï¼‰

### Stagingç’°å¢ƒï¼ˆstaging.oshi-talk.comï¼‰

- [ ] è¦ªãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆoshi-talk.comï¼‰ã®èªè¨¼ã‚’ç¶™æ‰¿
- [ ] Supabase Edge Functionsç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆStagingç”¨ï¼‰
- [ ] ãƒ†ã‚¹ãƒˆé€ä¿¡æˆåŠŸ

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

- **Resend Dashboard**: https://resend.com/
- **Resend Documentation**: https://resend.com/docs
- **Domain Authentication Guide**: https://resend.com/docs/dashboard/domains/introduction
- **DNS Checker**: https://dnschecker.org/

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆ:

1. **Resendã‚µãƒãƒ¼ãƒˆ**: https://resend.com/support
2. **Resend Discord**: https://discord.gg/resend
3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://resend.com/docs

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… ã“ã®ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦ãƒ‰ãƒ¡ã‚¤ãƒ³èªè¨¼ã‚’ç¢ºèª
2. âœ… ãƒ†ã‚¹ãƒˆé€ä¿¡ã§å‹•ä½œç¢ºèª
3. â­ï¸ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«é€šçŸ¥æ©Ÿèƒ½ã‚’å®Ÿè£…
   - ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³é–‹å§‹é€šçŸ¥
   - è½æœ­é€šçŸ¥
   - Talké–‹å§‹ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼
4. â­ï¸ å¿…è¦ã«å¿œã˜ã¦Proãƒ—ãƒ©ãƒ³ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰

---

**æœ€çµ‚æ›´æ–°**: 2025-11-22
